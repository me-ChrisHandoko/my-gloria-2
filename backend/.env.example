# ============================================
# Gloria Backend - Environment Configuration Template
# ============================================
# Copy this file to .env and update with your values
# ============================================

# ====================
# Application Settings
# ====================
NODE_ENV=development
PORT=3001
API_VERSION=v1
APP_NAME="Gloria Backend"
LOG_LEVEL=debug
PRETTY_LOGS=true

# ====================
# Database Configuration (Required)
# ====================
# Main database connection string
DATABASE_URL="postgresql://username:password@localhost:5432/database_name"

# Connection pool settings
DATABASE_POOL_SIZE=5                    # Number of connections in pool (production: 20)
DATABASE_CONNECTION_TIMEOUT=5000        # Connection timeout in ms
DATABASE_POOL_TIMEOUT=10000            # Pool acquisition timeout in ms
DATABASE_STATEMENT_TIMEOUT=30000       # Statement execution timeout in ms
DATABASE_QUERY_TIMEOUT=10000           # Query execution timeout in ms

# Retry configuration
DATABASE_MAX_RETRIES=3                 # Maximum connection retry attempts
DATABASE_RETRY_DELAY=1000              # Delay between retries in ms

# Query logging and monitoring
DATABASE_ENABLE_QUERY_LOGGING=true     # Enable query logging (disable in production)
DATABASE_ENABLE_SLOW_QUERY_LOGGING=true # Enable slow query logging
DATABASE_SLOW_QUERY_THRESHOLD=500      # Slow query threshold in ms

# Read replica configuration (optional)
DATABASE_ENABLE_READ_REPLICA=false
# DATABASE_READ_REPLICA_URL="postgresql://username:password@localhost:5432/database_name"

# Circuit breaker configuration
DATABASE_ENABLE_CIRCUIT_BREAKER=false  # Enable in production
DATABASE_CIRCUIT_BREAKER_THRESHOLD=5   # Failures before opening circuit
DATABASE_CIRCUIT_BREAKER_TIMEOUT=60000 # Circuit reset timeout in ms

# ====================
# Clerk Authentication (Required)
# ====================
# Get these from dashboard.clerk.dev
CLERK_PUBLISHABLE_KEY=pk_test_your_publishable_key
CLERK_SECRET_KEY=sk_test_your_secret_key

# ====================
# Redis Cache (Optional)
# ====================
# REDIS_URL=redis://localhost:6379
# CACHE_TTL=3600                        # Cache TTL in seconds
# SESSION_TTL=86400                     # Session TTL in seconds

# ====================
# Email Service (Optional)
# ====================
# Get these from account.postmarkapp.com
# POSTMARK_API_KEY=your_postmark_api_key
# POSTMARK_FROM_EMAIL=noreply@yourdomain.com
# POSTMARK_REPLY_TO_EMAIL=support@yourdomain.com

# ====================
# Security Configuration (Required)
# ====================
# Generate with: openssl rand -hex 32
JWT_SECRET=generate_32_character_hex_string_here
JWT_EXPIRES_IN=7d
ENCRYPTION_KEY=generate_32_character_hex_string_here
ENCRYPTION_ALGORITHM=aes-256-gcm

# ====================
# CORS Configuration
# ====================
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true

# ====================
# Rate Limiting
# ====================
RATE_LIMIT_TTL=60000                   # Window in ms
RATE_LIMIT_MAX=100                     # Max requests per window

# ====================
# API Documentation
# ====================
SWAGGER_ENABLED=true
SWAGGER_PATH=/api/docs
SWAGGER_TITLE="Gloria API Documentation"
SWAGGER_DESCRIPTION="Gloria Backend API"

# ====================
# Development Tools
# ====================
ENABLE_DEBUG_MODE=true
MOCK_EXTERNAL_SERVICES=false

# ====================
# Feature Flags
# ====================
FEATURE_WORKFLOW_ENGINE=true
FEATURE_NOTIFICATIONS=true
FEATURE_AUDIT_LOG=true
FEATURE_PERMISSION_CACHE=true
FEATURE_EMAIL_VERIFICATION=false

# ====================
# Health Check
# ====================
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=false

# ====================
# Monitoring (Optional)
# ====================
# SENTRY_DSN=https://xxx@sentry.io/xxx
# APM_ENABLED=false
# APM_SERVICE_NAME=gloria-backend
# APM_SECRET_TOKEN=your_apm_token

# ====================
# File Upload Settings
# ====================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760                 # 10MB in bytes
ALLOWED_FILE_TYPES=jpg,jpeg,png,pdf,doc,docx,xls,xlsx

# ====================
# System Limits
# ====================
MAX_REQUEST_SIZE=50mb
REQUEST_TIMEOUT=30000                  # Request timeout in ms
MAX_CONCURRENT_REQUESTS=1000

# ====================
# Production Settings (Examples)
# ====================
# When deploying to production, consider these settings:
#
# NODE_ENV=production
# DATABASE_POOL_SIZE=20
# DATABASE_ENABLE_QUERY_LOGGING=false
# DATABASE_ENABLE_CIRCUIT_BREAKER=true
# DATABASE_SLOW_QUERY_THRESHOLD=1000
# SWAGGER_ENABLED=false
# ENABLE_DEBUG_MODE=false
# LOG_LEVEL=info
# PRETTY_LOGS=false